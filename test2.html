<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CSV Plot Viewer</title>

    <!-- Load Plotly -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <!-- Load PapaParse for CSV reading -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

</head>
<body>
    <h2>CSV Plot Viewer</h2>

    <input type="file" id="csvFile" accept=".csv" />
    <div id="chart" style="width: 100%; height: 600px;"></div>

    <script>
        document.getElementById('csvFile').addEventListener('change', function (event) {

            const file = event.target.files[0];

            Papa.parse(file, {
                header: true,
                dynamicTyping: true,
                complete: function (results) {
                    const data = results.data;

                    // Extract columns
                    const minute = data.map(row => row.Minute);
                    const nominal = data.map(row => row.Nominal);
                    const power = data.map(row => row.Power);

                    // Plot using Plotly
                    const fig = {
                        data: [
                            {
                                x: minute,
                                y: nominal,
                                type: "scatter",
                                mode: "lines",
                                name: "Nominal (W)"
                            },
                            {
                                x: minute,
                                y: power,
                                type: "scatter",
                                mode: "lines",
                                name: "Power (W)"
                            }
                        ],
                        layout: {
                            title: "Nominal vs Power Over Time",
                            xaxis: { title: "Minute" },
                            yaxis: { title: "Power (W)" }
                        }
                    };

                    Plotly.newPlot("chart", fig);
                }
            });
        });
    </script>
</body>
</html>
